version: '3'
services:
  test_component:
    restart: unless-stopped
    image: my-qanary-container
    build:
      context: .
      dockerfile: Dockerfile
    container_name: $SERVICE_NAME_COMPONENT
    ports:
      - $SERVER_PORT:80
    environment:
      - SPRING_BOOT_ADMIN_URL=$SPRING_BOOT_ADMIN_URL
      - SPRING_BOOT_ADMIN_USERNAME=$SPRING_BOOT_ADMIN_USERNAME
      - SPRING_BOOT_ADMIN_PASSWORD=$SPRING_BOOT_ADMIN_PASSWORD
      - SERVER_HOST=$SERVER_HOST
      - SERVER_PORT=$SERVER_PORT
      - SERVICE_NAME_COMPONENT=$SERVICE_NAME_COMPONENT
      - SERVICE_DESCRIPTION_COMPONENT=$SERVICE_DESCRIPTION_COMPONENT
      - KG=$KG
      - PRODUCTION=True
    command: uvicorn component:app --host 0.0.0.0 --port=80